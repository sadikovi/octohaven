(function(){var t,e,n,r,o,i,u,s,p,a=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;s=this.loader,p=this.util,t=function(){function t(){}return t.prototype.doRequest=function(t,e,n,r,o){var i,u,s;return i=t.toLowerCase(),o&&"get"===i?(r=r+"?"+function(){var t;t=[];for(u in o)s=o[u],t.push(p.quote(u)+"="+p.quote(s));return t}().join("&"),o=null):"post"===i&&(o=JSON.stringify(o)),"function"==typeof e&&e(),loader.sendrequest(i,r,{},o,function(t,e){var r;return r=util.jsonOrElse(e),"function"==typeof n?n(!!r,r):void 0},function(t,e){var r;return r=util.jsonOrElse(e),"function"==typeof n?n(!1,r):void 0})},t.prototype.doGet=function(t,e,n,r){return null==r&&(r=null),this.doRequest("get",t,e,n,r)},t.prototype.doPost=function(t,e,n,r){return this.doRequest("post",t,e,n,r)},t}(),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.requestStatus=function(t,e){return this.doGet(t,e,"/api/v1/spark/status",null)},e}(t),null==this.StatusApi&&(this.StatusApi=o),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.breadcrumbs=function(t,e,n){return this.doGet(e,n,"/api/v1/file/breadcrumbs",{path:""+t})},e.prototype.files=function(t,e,n){return this.doGet(e,n,"/api/v1/file/list",{path:t})},e}(t),null==this.FilelistApi&&(this.FilelistApi=e),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.get=function(t,e,n,r){var o;return o={status:""+t,limit:""+e},this.doGet(n,r,"/api/v1/job/list",o)},e.prototype.close=function(t,e,n){return this.doGet(e,n,"/api/v1/job/close",{jobid:""+t})},e.prototype.getJob=function(t,e,n){return this.doGet(e,n,"/api/v1/job/get",{jobid:""+t})},e.prototype.submit=function(t,e,n){return this.doPost(e,n,"/api/v1/job/submit",t)},e}(t),null==this.JobApi&&(this.JobApi=n),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.show=function(t,e){return this.doGet(t,e,"/api/v1/template/list")},e.prototype["delete"]=function(t,e,n){return this.doGet(e,n,"/api/v1/template/delete",{templateid:""+t})},e.prototype.create=function(t,e,n){return this.doPost(e,n,"/api/v1/template/create",t)},e}(t),null==this.TemplateApi&&(this.TemplateApi=i),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.readFromStart=function(t,e,n,r,o){var i;return i={jobid:""+t,type:""+e,page:""+n},this.doGet(r,o,"/api/v1/file/log",i)},e}(t),null==this.LogApi&&(this.LogApi=r),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.submit=function(t,e,n){return this.doPost(e,n,"/api/v1/timetable/create",t)},e.prototype.list=function(t,e,n,r){var o;return o={includejobs:""+t,status:""+e},this.doGet(n,r,"/api/v1/timetable/list",o)},e.prototype.get=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/get",{id:""+t})},e.prototype.pause=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/pause",{id:""+t})},e.prototype.resume=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/resume",{id:""+t})},e.prototype.cancel=function(t,e,n){return this.doGet(e,n,"/api/v1/timetable/cancel",{id:""+t})},e}(t),null==this.TimetableApi&&(this.TimetableApi=u)}).call(this),function(){var t,e,n,r,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(){function t(t){this.settings=null!=t?t:{},this.correct(this.settings)}return t.prototype.set=function(t,e){return null!==e?this.settings[t]=e.toString():null},t.prototype.getOrElse=function(t,e){return t in this.settings?this.settings[t]:e},t.prototype.get=function(t){return this.getOrElse(t,null)},t.prototype.exists=function(t){return null!==this.get(t)},t.prototype.correct=function(){var t,e,n,r;n=this.settings,r=[];for(t in n)e=n[t],r.push(this.set(t,e));return r},t}(),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(e),null==this.Template&&(this.Template=n),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(e),null==this.Timetable&&(this.Timetable=r),t=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e}(e),null==this.ClusterStatus&&(this.ClusterStatus=t)}.call(this),function(){var t,e,n,r,o,i,u,s,p,a,l,c,f,h;if(l=document.getElementById("octohaven-spark-server-status"),c=document.getElementById("octohaven-spark-ui-address"),s=document.getElementById("octohaven-spark-master-address"),!(l&&c&&s))throw new Error("Cluster status entries are undefined");h=this.util,f=new this.StatusApi,o=new this.ClusterStatus,e="Pending...",n="Cluster is ready",t="Cluster is busy",r="Cluster is unreachable",u=function(o){return"0"===o?n:"-1"===o?t:"-2"===o?r:e},i=function(t){return"0"===t?"text-green":"-1"===t?"text-yellow":"-2"===t?"text-red":"text-mute"},a=function(t){return l.className="",h.addClass(l,i(t.get("status"),null)),l.innerHTML=u(t.get("status"),null),c.innerHTML=t.getOrElse("spark-ui-address","?"),s.innerHTML=t.getOrElse("spark-master-address","?")},p=function(){var t,e;return e=function(){return a(o)},t=function(t,e){return t&&(o=new this.ClusterStatus(e.content)),a(o)},f.requestStatus(e,t)},"function"==typeof p&&p()}.call(this);