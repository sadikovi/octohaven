(function(){var e,t,n,o,r,a,i,s,l,u,d,m,c,p,b,h,f,g,v,w;if(b=document.getElementById("octohaven-timetable-show"),!b)throw new Error("Timetable placeholders are not found");if(f=this.mapper,w=this.util,g=this.misc,v=new this.TimetableApi,s=w.windowParameters(),i=null!=s?s.mode:void 0,o=null!=s?s.id:void 0,"show"!==i)return h=g.blankslateWithMsg("Something went wrong :(","Unrecognized mode"),void f.parseMapForParent(h,b);if(null===o)return h=g.blankslateWithMsg("Something went wrong :(","Undefined id"),void f.parseMapForParent(h,b);if(m=document.getElementById("octohaven-show-controls"),c=document.getElementById("octohaven-validation-status"),e=document.getElementById("octohaven-cancel-timetable"),!(m&&e&&c))throw new Error("Control requirements failed");l=function(e){return e?w.addClass(c,"loading"):w.removeClass(c,"loading")},u=function(e,t){var n;return c.innerHTML="",i=e?"success-box":"error-box",n={type:"div",cls:i,children:t},f.parseMapForParent(n,c)},d=function(e,t){return u(e,{type:"span",title:""+t})},t=function(e){return l(!0),v.cancel(e,null,function(e,t){var n;return l(!1),n=t?t.content.msg:"Something went wrong :(",d(e,n)})},n=function(e,t,n){var o;return null==n&&(n=null),o={type:"div",cls:e+" column",children:t},f.parseMapForParent(o,n)},r=function(e,t,o){var r,a;return r=f.parseMapForParent({type:"span",cls:"text-mute tooltipped tooltipped-n",title:""+e}),r.setAttribute("aria-label",""+t),a=[n("one-fourth",r),n("three-fourths",{type:"span",children:o})],g.segment(g.columns(a))},a=function(e,t,n){return r(e,t,{type:"span",title:""+n})},p=function(e,t){return e>0?w.timestampToDate(e):""+t},v.get(o,function(){return b.innerHTML=""},function(n,o){var i,s,l,u,d,h,v;return d=null,n?(w.removeClass(c,"hidden"),w.removeClass(m,"hidden"),v=o.content.timetable,i=o.content.job,s=i.uid,l=i.sparkjob.name,h=[a("Timetable id","Timetable id",v.uid),a("Name","Timetable name",v.name),a("Status","Timetable status",v.status),r("Clone job","Job that is used to create jobs for timetable",{type:"a",href:"/job?jobid="+s,title:""+l}),a("Cron expression","Timetable schedule as Cron expression",v.crontab.pattern),a("Start time","Start time for timetable",p(v.starttime,"None")),a("Stop time","Stop time for timetable (if cancelled)",p(v.stoptime,"None")),a("Number of jobs run","Number of actual jobs having run",v.numjobs),r("Latest scheduled job","Latest scheduled job for timetable",{type:"a",href:"/job?jobid="+v.latestjobid,title:"view"}),a("Latest run","Latest run (if any)",p(v.latestruntime,"None"))],d=g.segments(h),"CANCELLED"===v.status?w.addClass(e,"btn-disabled"):(e.uid=v.uid,w.addEventListener(e,"click",function(e){return t(this.uid),e.preventDefault(),e.stopPropagation()}))):(u=o?o.content.msg:"We know and keep working on that",d=g.blankslateWithMsg("Something went wrong :(",u)),f.parseMapForParent(d,b)})}).call(this);